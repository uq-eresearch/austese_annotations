/*
** Annotator 1.2.6-dev-30b6543
** https://github.com/okfn/annotator/
**
** Copyright 2012 Aron Carroll, Rufus Pollock, and Nick Stenning.
** Dual licensed under the MIT and GPLv3 licenses.
** https://github.com/okfn/annotator/blob/master/LICENSE
**
** Built at: 2013-05-21 00:13:14Z
*/((function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};Annotator.Plugin.Motivations=function(b){function d(b,c){this.setAnnotationMotivations=a(this.setAnnotationMotivations,this),this.updateField=a(this.updateField,this),d.__super__.constructor.apply(this,arguments),c.motivations&&(this.options.motivations=c.motivations)}return c(d,b),d.prototype.options={showField:!0,motivations:[{value:"oa:bookmarking",label:"Bookmarking"},{value:"oa:classifying",label:"Classifying"},{value:"oa:commenting",label:"Commenting"},{value:"oa:describing",label:"Describing"},{value:"oa:editing",label:"Editing"},{value:"oa:highlighting",label:"Highlighting"},{value:"oa:identifying",label:"Identifying"},{value:"oa:linking",label:"Linking"},{value:"oa:moderating",label:"Moderating"},{value:"oa:questioning",label:"Questioning"},{value:"oa:replying",label:"Replying"},{value:"oa:tagging",label:"Tagging"}]},d.prototype.field=null,d.prototype.input=null,d.prototype.pluginInit=function(){var a,b,c,d,e,f,g;if(!Annotator.supported())return;this.field=this.annotator.editor.addField({label:Annotator._t("ExplanatoryNote"),load:this.updateField,submit:this.setAnnotationMotivations}),a=Annotator.$(this.field).find("input").attr("id"),d='<li class="annotator-item"><select style="width:100%"><option value="">(Uncategorised)</option>',g=this.options.motivations;for(e=0,f=g.length;e<f;e++)b=g[e],d+='<option value="'+b.value+'">'+b.label+"</option>";return d+="</select></li>",c=Annotator.$(d),Annotator.$(this.field).replaceWith(c),this.field=c[0],this.annotator.viewer.addField({load:this.updateViewer,annoPlugin:this}),this.input=Annotator.$(this.field).find("select")},d.prototype.updateField=function(a,b){var c;return c="",b.motivation&&(c=b.motivation),this.input.val(c)},d.prototype.setAnnotationMotivations=function(a,b){return b.motivation=this.input.val()},d.prototype.updateViewer=function(a,b){var c,d,e,f,g,h;a=Annotator.$(a);if(b.motivation){c=b.motivation,g=this.annoPlugin.options.motivations,h=[];for(e=0,f=g.length;e<f;e++)d=g[e],d.value===b.motivation?(c=d.label,a.parent().parent().find(".annotator-motivation").html(Annotator.$.escape(c)+" "),this.annoPlugin.options.showField?h.push(a.addClass("annotator-motivation").html('<span class="annotator-motivation">'+Annotator.$.escape(c)+"</span>")):h.push(a.remove())):h.push(void 0);return h}return a.remove()},d}(Annotator.Plugin)})).call(this);